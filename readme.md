# FMI open pv forecast package


The main functionality of this package is the PV forecasting tool which is a combination of the FMI PV model and
weather forecasts from FMI open data. The resulting PV forecasting tool generates hourly weather aware PV forecasts for 
a 66-hour period. These forecasts take panel orientation, panel surface reflections, panel temperature and other factors
into account, resulting in generally accurate modeling of PV output when weather forecasts align with actual experienced
weather.

The forecasting package has in-built functionality for using clear sky radiation estimates from PVlib. These clear sky
forecasts can be used for testing purposes, system monitoring or in cases when internet access is not available.

The PV model can also be used with external data sources by feeding it dataframes with the required radiation components.
See example on using external data from usage_examples.md.

#### Authors
Timo Salola(Finnish meteorological institute)

Additional help from: Viivi Kallio, William Wandji, Anders Lindfors, Juha Karhu.

This project uses PVlib.


## Forecast updating frequency and time window
The FMI open data forecasts are available for a 66-hour window. This window contains a couple of hours of past data due
to weather model simulations taking several hours of time on supercomputers. Forecasts update once every 3 hours.


## Geographic boundaries

The available forecasting region depends on the radiation and weather forecasts. FMI open forecasting region 
covers Finland, Scandinavia- and baltic countries with some additional margin. 
See https://en.ilmatieteenlaitos.fi/numerical-weather-prediction.

PVlib clear sky forecasts are not limited to a region, and they can be calculated globally.

## Forecast accuracy

The PV model itself has been tested against on site measurements of solar radiation, air temperature and wind speed. 
In these tests the model has proven to be accurate to nearly perfect in various weather conditions experienced in Finland.
The PV model was not specifically tuned for Finnish conditions, and it should behave well regardless of the geographic
region.


However, especially clouds influence PV output and current weather forecasting models are not very good at precise
cloud forecasting. In addition, forecasts typically 


can not forecast clouds 

. Forecasts for totally clear


significantly and current forecasting models tend to have difficulties with forecasting clouds accurately.

When 

strongly influenced by clouds and accurate forecasting of clouds is difficult. 


radiation components which are the most significant factor in PV outpu

The PV forecasting tool included in the package is an implementation of this PV model, and it uses radiation- and
weather forecasts from FMI open data as inputs. FMI open data offers forecasts for a geographic region covering Finland,
Scandinavian- and baltic countries with some additional margin. Due to the unpredictable nature of clouds and the 
significant influence of clouds on the performance of PV systems forecasts generated by this package should be
considered with the same uncertainty as cloudiness in weather forecasts.





The FMI PV model
consists of physical models which simulate panel reflective losses, panel temperatures and output efficiency among
other features, resulting in a processing pipeline which can be fed radiation data.

The 



This project is the packaged version of a solar photovoltaic output forecasting tool and model published earlier at
https://github.com/fmidev/fmi-open-pv-forecast.

The PV model is a 6 step data processing model which utilizes 

Goal here was to make the model and forecasting tools as easy to use as possible for home automation and research projects.

### Minimal example
```python
import fmi_pv_forecaster as pvfc

pvfc.set_angles(25, 180)
pvfc.set_location(60.1576,24.8762)
pvfc.set_nominal_power_kw(4)

data = pvfc.get_default_fmi_forecast()

print("Forecast:")
print(data)
```


Resulting print:
```commandline
Forecast:
                        T  wind  module_temp     output
Time                                                   
2026-01-20 10:30:00  -0.8  0.79    -0.800000   0.000000
2026-01-20 11:30:00  -0.6  1.33    -0.048916  38.589095
2026-01-20 12:30:00  -0.5  1.78    -0.136189  25.854990
2026-01-20 13:30:00  -0.7  2.30    -0.627352   5.316707
2026-01-20 14:30:00  -1.0  2.37    -0.999996   0.000000
...                   ...   ...          ...        ...
2026-01-23 01:30:00 -15.2  0.73   -15.200000   0.000000
2026-01-23 02:30:00 -15.6  0.73   -15.600000   0.000000
2026-01-23 03:30:00   NaN   NaN          NaN   0.000000
2026-01-23 04:30:00   NaN   NaN          NaN   0.000000
2026-01-23 05:30:00   NaN   NaN          NaN   0.000000
```


More examples on how to use the model are available usage_examples.md.

## PV model

The packaged nature of the PV model hides the processing pipeline. In a typical usage scenario the user will feed in 
information on geolocation, panel angles, system size and request a forecast for said installation. However understanding
the model itself may help in troubleshooting.

The data processing pipeline used by the PV model consists of



---

